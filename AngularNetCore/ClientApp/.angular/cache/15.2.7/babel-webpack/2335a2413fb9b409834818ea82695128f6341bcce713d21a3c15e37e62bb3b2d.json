{"ast":null,"code":"import { createEffect, ofType } from '@ngrx/effects';\nimport { deleteBook, deleteBookSuccess, loadBooks, loadBooksSuccess } from './book.actions';\nimport { map, mergeMap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/book.service\";\nimport * as i2 from \"@ngrx/effects\";\nexport class BookEffects {\n  constructor(service, actions$) {\n    this.service = service;\n    this.actions$ = actions$;\n    this.$loadBooks = createEffect(() => this.actions$.pipe(ofType(loadBooks), mergeMap(() => this.service.getAllBooks().pipe(map(books => ({\n      type: loadBooksSuccess.type,\n      payload: books\n    }))))));\n    this.$deleteBook = createEffect(() => this.actions$.pipe(ofType(deleteBook), mergeMap(action => this.service.deleteBook(action.bookId).pipe(map(() => ({\n      type: deleteBookSuccess.type\n    }))))));\n  }\n}\nBookEffects.ɵfac = function BookEffects_Factory(t) {\n  return new (t || BookEffects)(i0.ɵɵinject(i1.BookService), i0.ɵɵinject(i2.Actions));\n};\nBookEffects.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: BookEffects,\n  factory: BookEffects.ɵfac\n});","map":{"version":3,"mappings":"AAAA,SAAkBA,YAAY,EAAEC,MAAM,QAAQ,eAAe;AAE7D,SAASC,UAAU,EAAEC,iBAAiB,EAAEC,SAAS,EAAEC,gBAAgB,QAAQ,gBAAgB;AAC3F,SAASC,GAAG,EAAEC,QAAQ,QAAmB,MAAM;;;;AAI/C,OAAM,MAAOC,WAAW;EACtBC,YAAoBC,OAAoB,EAAUC,QAAiB;IAA/C,YAAO,GAAPD,OAAO;IAAuB,aAAQ,GAARC,QAAQ;IAE1D,eAAU,GAAGX,YAAY,CAAC,MACxB,IAAI,CAACW,QAAQ,CAACC,IAAI,CAChBX,MAAM,CAACG,SAAS,CAAC,EACjBG,QAAQ,CAAC,MACP,IAAI,CAACG,OAAO,CACTG,WAAW,EAAE,CACbD,IAAI,CACHN,GAAG,CAAEQ,KAAK,KAAM;MAAEC,IAAI,EAAEV,gBAAgB,CAACU,IAAI;MAAEC,OAAO,EAAEF;IAAK,CAAE,CAAC,CAAC,CAClE,CACJ,CACF,CACF;IAED,gBAAW,GAAGd,YAAY,CAAC,MACzB,IAAI,CAACW,QAAQ,CAACC,IAAI,CAChBX,MAAM,CAACC,UAAU,CAAC,EAClBK,QAAQ,CAAEU,MAAM,IACd,IAAI,CAACP,OAAO,CACTR,UAAU,CAACe,MAAM,CAACC,MAAM,CAAC,CACzBN,IAAI,CACHN,GAAG,CAAC,OAAO;MAAES,IAAI,EAAEZ,iBAAiB,CAACY;IAAI,CAAE,CAAC,CAAC,CAC9C,CACJ,CACF,CACF;EA1BqE;;AAD3DP,WAAW;mBAAXA,WAAW;AAAA;AAAXA,WAAW;SAAXA,WAAW;EAAAW,SAAXX,WAAW;AAAA","names":["createEffect","ofType","deleteBook","deleteBookSuccess","loadBooks","loadBooksSuccess","map","mergeMap","BookEffects","constructor","service","actions$","pipe","getAllBooks","books","type","payload","action","bookId","factory"],"sourceRoot":"","sources":["C:\\Users\\rafae\\Documents\\Projects\\linkedin\\AngularNetCore\\AngularNetCore\\ClientApp\\src\\app\\store\\book.effects.ts"],"sourcesContent":["import { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { BookService } from '../services/book.service';\r\nimport { deleteBook, deleteBookSuccess, loadBooks, loadBooksSuccess } from './book.actions';\r\nimport { map, mergeMap, switchMap } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class BookEffects {\r\n  constructor(private service: BookService, private actions$: Actions) {}\r\n\r\n  $loadBooks = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(loadBooks),\r\n      mergeMap(() =>\r\n        this.service\r\n          .getAllBooks()\r\n          .pipe(\r\n            map((books) => ({ type: loadBooksSuccess.type, payload: books }))\r\n          )\r\n      )\r\n    )\r\n  );\r\n\r\n  $deleteBook = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(deleteBook),\r\n      mergeMap((action) =>\r\n        this.service\r\n          .deleteBook(action.bookId)\r\n          .pipe(\r\n            map(() => ({ type: deleteBookSuccess.type }))\r\n          )\r\n      )\r\n    )\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}